{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Button,FormControl,FormLabel,Input,VStack,Heading,useToast}from\"@chakra-ui/react\";import axios from'axios';// Create an axios instance\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const api=axios.create({baseURL:'http://localhost:5000/api/'});// Add a request interceptor\napi.interceptors.request.use(config=>{const token=localStorage.getItem('accessToken');if(token){config.headers['Authorization']=`Bearer ${token}`;}return config;},error=>{return Promise.reject(error);});const Auth=_ref=>{let{onLogin}=_ref;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const toast=useToast();useEffect(()=>{// Check if there's an existing token\nconst token=localStorage.getItem('accessToken');if(token){onLogin();}},[onLogin]);const handleLogin=async e=>{e.preventDefault();try{const response=await api.post('token/',{username,password});const{access,refresh}=response.data;// Store tokens in localStorage\nlocalStorage.setItem('accessToken',access);localStorage.setItem('refreshToken',refresh);// Show success message\ntoast({title:\"Login Successful\",status:\"success\",duration:3000,isClosable:true});// Call the onLogin callback\nonLogin();}catch(error){console.error('Login failed:',error);toast({title:\"Login Failed\",description:\"Please check your credentials and try again.\",status:\"error\",duration:3000,isClosable:true});}};return/*#__PURE__*/_jsx(Box,{maxWidth:\"400px\",margin:\"auto\",mt:8,children:/*#__PURE__*/_jsxs(VStack,{spacing:4,as:\"form\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(Heading,{children:\"Login\"}),/*#__PURE__*/_jsxs(FormControl,{isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Username\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:username,onChange:e=>setUsername(e.target.value)})]}),/*#__PURE__*/_jsxs(FormControl,{isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Password\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",value:password,onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",colorScheme:\"blue\",width:\"full\",children:\"Login\"})]})});};export default Auth;","map":{"version":3,"names":["React","useState","useEffect","Box","Button","FormControl","FormLabel","Input","VStack","Heading","useToast","axios","jsx","_jsx","jsxs","_jsxs","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject","Auth","_ref","onLogin","username","setUsername","password","setPassword","toast","handleLogin","e","preventDefault","response","post","access","refresh","data","setItem","title","status","duration","isClosable","console","description","maxWidth","margin","mt","children","spacing","as","onSubmit","isRequired","type","value","onChange","target","colorScheme","width"],"sources":["/home/ubuntu/InventoryManagementSaaS/home/ubuntu/inventory-frontend/src/components/Auth.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Box, Button, FormControl, FormLabel, Input, VStack, Heading, useToast } from \"@chakra-ui/react\";\nimport axios from 'axios';\n\n// Create an axios instance\nconst api = axios.create({\n  baseURL: 'http://localhost:5000/api/'\n});\n\n// Add a request interceptor\napi.interceptors.request.use(\n  config => {\n    const token = localStorage.getItem('accessToken');\n    if (token) {\n      config.headers['Authorization'] = `Bearer ${token}`;\n    }\n    return config;\n  },\n  error => {\n    return Promise.reject(error);\n  }\n);\n\nconst Auth = ({ onLogin }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const toast = useToast();\n\n  useEffect(() => {\n    // Check if there's an existing token\n    const token = localStorage.getItem('accessToken');\n    if (token) {\n      onLogin();\n    }\n  }, [onLogin]);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await api.post('token/', {\n        username,\n        password\n      });\n\n      const { access, refresh } = response.data;\n\n      // Store tokens in localStorage\n      localStorage.setItem('accessToken', access);\n      localStorage.setItem('refreshToken', refresh);\n\n      // Show success message\n      toast({\n        title: \"Login Successful\",\n        status: \"success\",\n        duration: 3000,\n        isClosable: true,\n      });\n\n      // Call the onLogin callback\n      onLogin();\n    } catch (error) {\n      console.error('Login failed:', error);\n      toast({\n        title: \"Login Failed\",\n        description: \"Please check your credentials and try again.\",\n        status: \"error\",\n        duration: 3000,\n        isClosable: true,\n      });\n    }\n  };\n\n  return (\n    <Box maxWidth=\"400px\" margin=\"auto\" mt={8}>\n      <VStack spacing={4} as=\"form\" onSubmit={handleLogin}>\n        <Heading>Login</Heading>\n        <FormControl isRequired>\n          <FormLabel>Username</FormLabel>\n          <Input\n            type=\"text\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n        </FormControl>\n        <FormControl isRequired>\n          <FormLabel>Password</FormLabel>\n          <Input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </FormControl>\n        <Button type=\"submit\" colorScheme=\"blue\" width=\"full\">\n          Login\n        </Button>\n      </VStack>\n    </Box>\n  );\n};\n\nexport default Auth;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}